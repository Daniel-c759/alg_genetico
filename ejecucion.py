from funciones_data import agregar_info_redes, array_redes
from algoritmo_gen import optimizar_gen
from funciones_redes import red_completa
import pandas as pd
import numpy as np

data=pd.DataFrame({"fecha":["2021-01-01","2021-02-01","2021-03-01","2021-04-01",
                            "2021-01-01","2021-02-01","2021-03-01","2021-04-01",
                            "2021-01-01","2021-02-01","2021-03-01","2021-04-01",
                            "2021-01-01","2021-02-01","2021-03-01","2021-04-01",
                            "2021-01-01","2021-02-01","2021-03-01","2021-04-01",
                            "2021-01-01","2021-02-01","2021-03-01","2021-04-01",
                            "2021-01-01","2021-02-01","2021-03-01","2021-04-01",
                            "2021-01-01","2021-02-01","2021-03-01","2021-04-01",
                            "2021-01-01","2021-02-01","2021-03-01","2021-04-01",
                            "2021-01-01","2021-02-01","2021-03-01","2021-04-01"],
                    "NDI":["A","A","A","A",
                           "B","B","B","B",
                           "C","C","C","C",
                           "D","D","D","D",
                           "E","E","E","E",
                           "F","F","F","F",
                           "G","G","G","G",
                           "H","H","H","H",
                           "I","I","I","I",
                           "J","J","J","J"],
                    "var1":[0,0.5,0.25,1,
                            1,0.5,0.25,1,
                            0.2,0.3,0.2,0.3,
                            1,0.8,0.8,1,
                            0.5,0.7,1,1,
                            0.2,0.2,0,0.1,
                            0.5,0.5,0.9,1,
                            0.5,0.5,0.2,0.2,
                            1,0.6,0.4,0,
                            0.7,0.5,0.5,0.3]})
print(data)

data2=pd.DataFrame({"NDI":["A","B","C","D","E","F","G","H","I","J"],
                    "sexo":[1,0,1,1,0,0,1,0,1,1],
                    "estrato":[3,6,1,4,3,5,4,5,1,1],
                    "exoneracion":[0,1,0,1,1,0,0,1,0,0]})

print(data2)

company=agregar_info_redes(data=data,
                         excluir=["fecha","NDI"],
                         identificador="NDI")


social=array_redes(data=data2,
                  excluir=["NDI"],
                  identificador="NDI")

params={"w01":1.91836735,"w11":-0.85714286,"b11":1.18367347,
        "w02":0.44897959,"w12":0.53061224,"b12":1.75510204,
        "w03":-0.44897959,"w13":0.36734694,"b13":-0.36734694,
        "w04":-1.42857143,"w14":0.12244898,"b14":1.67346939}

param_vars={"var1":params}

params_cate={"var1":1.10204082,"var2":1.10204082,
             "var3":-0.20408163, "var4":-1.83673469, 
             "bcat":-0.36734694}

# (0.898989898989899, array([ 1.91836735, -0.85714286,  1.18367347,  0.44897959,  0.53061224,
#         1.75510204, -0.44897959,  0.36734694, -0.36734694, -1.42857143,
#         0.12244898,  1.67346939,  1.10204082,  1.10204082, -0.20408163,
#        -1.83673469, -0.36734694]))
# encontrado con algoritmo genetico


verdad=np.array([0,1,0,1,1,0,1,0,0,0])
print(verdad)


# print(optimizar_gen(np.linspace(-2,2,50),1,3,5,
#                     company,social,verdad, 0.0005, 100, 0.0001, 10))

print(red_completa(company,social,param_vars,params_cate))